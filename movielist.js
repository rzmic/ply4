$(document).ready((function(){function fetchPosts(a,t){const e=`https://db.ply4.com/posts?page=${a}&pageSize=10`,i=t?`${e}&title=${encodeURIComponent(t)}`:e;$.ajax({url:i,type:"GET",success:function(t){!function displayPosts(a){$("#postsList").empty(),a.forEach((a=>{const t=`<div class="card mb-2">\n                              <div class="card-body">\n                              <small>${a.tmdb}</small> - <a href="https://${window.location.hostname}${window.location.port?":"+window.location.port:""}/movie/?id=${a.tmdb}" target="_blank">${a.title}</a>\n                              </div>\n                            </div>`;$("#postsList").append(t)}))}(t.posts),function displayPagination(a,t){$("#pagination").empty();const e=5,i=Math.max(1,t-Math.floor(e/2)),n=Math.min(a,i+e-1);t>1&&$("#pagination").append(`<li class="page-item"><a class="page-link" href="#" data-page="${t-1}">&lt;&lt;</a></li>`);for(let s=i;s<=n;s++){const a=s===t?"active":"";$("#pagination").append(`<li class="page-item ${a}"><a class="page-link" href="#" data-page="${s}">${s}</a></li>`)}t<a&&$("#pagination").append(`<li class="page-item"><a class="page-link" href="#" data-page="${t+1}">&gt;&gt;</a></li>`);$("#pagination").on("click","a.page-link",(function(a){a.preventDefault();fetchPosts($(this).data("page"),$("#searchTitle").val())}))}(t.totalPages,a)},error:function(a){alert("Failed to fetch posts. Please try again.")}})}$("#searchForm").submit((function(a){a.preventDefault();fetchPosts(1,$("#searchTitle").val())})),$("#resetSearch").click((function(){$("#searchTitle").val(""),fetchPosts(1,"")})),fetchPosts(1,"")}));
