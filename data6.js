function t(t,e,o,r){return[]}async function e(t){try{const e=await fetch(`https://uc.ply4.com/${encodeURIComponent(t)}`);if(e.ok){return(await e.json()).playlistUrl}return null}catch(e){return null}}async function o(t){try{const e=await fetch(`https://vc.ply4.com/${encodeURIComponent(t)}`);if(e.ok){return(await e.json()).playlistUrl}return null}catch(e){return null}}async function r(t){try{const e=await fetch(`https://vc.ply4.com/${encodeURIComponent(t)}`);if(e.ok){return(await e.json()).playlistUrl2}return null}catch(e){return null}}document.addEventListener("DOMContentLoaded",(async function(){const i=new URLSearchParams(window.location.search);let l=i.get("id");const n=i.get("sub");if(!l)return void(document.querySelector(".error-message").style.display="flex");let a="",c=!1;if(l.startsWith("tt"))try{const t=await fetch(`https://api.themoviedb.org/3/find/${l}?api_key=712478bf12bb1fae1212625634c4ec0e&external_source=imdb_id`);if(!t.ok)throw new Error("Failed to convert IMDb ID to TMDB ID");{const e=await t.json();if(!(e.movie_results&&e.movie_results.length>0))throw new Error("No TMDB ID found for the provided IMDb ID");a=e.movie_results[0].id,c=!0}}catch(y){return void(document.querySelector(".error-message").style.display="flex")}else a=l,c=!0;let s,d,u="",h="",p="",m=!1;try{const i=await fetch(`https://db.ply4.com/movies/${a}`);if(i.ok){const l=await i.json();let c=l.title;const w=c.match(/\((\d{4})\)$/);if(year=w?w[1]:"",the_title=c.replace(/\s*\(\d{4}\)$/,"").trim(),l.upcloud_id&&""!==l.upcloud_id){const t=document.createElement("div");t.innerHTML="Initializing Default Server, Please wait!<br>if doesnt work try refreshing the page<br>or choose another server at player settings",t.className="confirm-dialog",document.body.appendChild(t),u=l.upcloud_id;try{await new Promise((t=>setTimeout(t,3e3))),u=await e(u)}catch(y){}document.body.removeChild(t)}l.vidcloud_id&&""!==l.vidcloud_id&&(h=l.vidcloud_id,p=l.vidcloud_id);const f=t(l,u,h,p);u||h||p?(m=!0,art=new Artplayer({container:".rplayer-pro",url:proxy1+u||proxy2+h||proxy3+p,setting:!0,fullscreen:!0,playsInline:!0,hotkey:!0,autoOrientation:!0,autoPlayback:!0,hotkey:!0,lock:!0,volume:1,airplay:!0,theme:"#0056B3",subtitle:{url:n||"",style:{color:"#fff","font-size":"calc(2vw + 12px)","margin-bottom":"4vw","@media (max-width: 576px)":{"font-size":"14px","margin-bottom":"20px"}}},settings:[{width:200,html:"Subtitle",tooltip:"Off",icon:'<svg fill="#000000" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M6 10v4c0 1.103.897 2 2 2h3v-2H8v-4h3V8H8c-1.103 0-2 .897-2 2zm7 0v4c0 1.103.897 2 2 2h3v-2h-3v-4h3V8h-3c-1.103 0-2 .897-2 2z"></path><path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zM4 18V6h16l.002 12H4z"></path></g></svg>',selector:[{html:"Display",tooltip:"Show",switch:!0,onSwitch:function(t){return t.tooltip=t.switch?"Hide":"Show",art.subtitle.show=!t.switch,!t.switch}},...await fetch("https://ply4.com/lang2.json").then((t=>t.json())).then((t=>t.map((t=>({html:t.name,iso:t.iso,url:""})))))],onSelect:async function(t){try{const e=await fetch(`https://subdl.ply4.com/?tmdbid=${a}&iso=${t.iso}`);if(e.ok){const o=`${await e.text()}`;return art.subtitle.switch(o,{name:t.html}),t.html}}catch(y){}}},{width:200,html:"Server",tooltip:"UpCloud",icon:'<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="icomoon-ignore"> </g> <path d="M16 2.139c-6.772 0-12.262 2.626-12.262 5.865v15.994c0 3.238 5.489 5.864 12.262 5.864 6.771 0 12.262-2.626 12.262-5.864v-15.994c0-3.239-5.491-5.865-12.262-5.865zM16 3.205c6.597 0 11.196 2.529 11.196 4.799 0 2.269-4.598 4.798-11.196 4.798-6.598 0-11.196-2.529-11.196-4.798 0-2.27 4.597-4.799 11.196-4.799zM27.196 22.931v1.066c0 2.269-4.598 4.798-11.196 4.798-6.598 0-11.196-2.529-11.196-4.798v-2.941c1.914 2.046 6.205 3.473 11.196 3.473 4.99 0 9.282-1.427 11.196-3.473v1.874zM27.196 18.666c0 2.269-4.598 4.798-11.196 4.798-6.598 0-11.196-2.529-11.196-4.798v-2.941c1.914 2.046 6.205 3.473 11.196 3.473 4.99 0 9.282-1.427 11.196-3.473v2.941zM27.196 13.335c0 2.269-4.598 4.798-11.196 4.798-6.598 0-11.196-2.529-11.196-4.798v-2.941c1.914 2.046 6.205 3.473 11.196 3.473 4.99 0 9.282-1.427 11.196-3.473v2.941z" fill="#ffffff"> </path> </g></svg>',selector:[u?{default:!0,html:"UpCloud",url:proxy1+u}:null,h?{html:"VidCloud",url:proxy2+h}:null,p?{html:"MegaCloud",url:proxy3+p}:null].filter((t=>t)),onSelect:async function(t){if("UpCloud"===t.html&&(art.switchUrl(proxy1+u),art.notice.show="Switched to UpCloud!"),"VidCloud"===t.html){const t=document.createElement("div");t.innerHTML="Processing VidCloud, Please wait...!",t.className="confirm-dialog",document.body.appendChild(t),await new Promise((t=>setTimeout(t,3e3))),s=await o(h),document.body.removeChild(t),s&&(art.switchUrl(proxy2+s),art.notice.show="Switched to VidCloud!")}if("MegaCloud"===t.html){const t=document.createElement("div");t.innerHTML="Processing MegaCloud, Please wait...!",t.className="confirm-dialog",document.body.appendChild(t),await new Promise((t=>setTimeout(t,3e3))),d=await r(p),document.body.removeChild(t),d&&(art.switchUrl(proxy3+d),art.notice.show="Switched to MegaCloud!")}return t.html}}],plugins:[artplayerPluginHlsQuality({control:!1,setting:!0,getResolution:t=>t.height+"P",title:"Quality",auto:"Auto"}),artplayerPluginChromecast({setting:!0,control:!1})],customType:{m3u8:function(t,e,o){if(Hls.isSupported()){o.hls&&o.hls.destroy();const r=new Hls;r.loadSource(e),r.attachMedia(t),o.hls=r,o.on("destroy",(()=>r.destroy()))}else t.canPlayType("application/vnd.apple.mpegurl")?t.src=e:o.notice.show="Unsupported playback format: m3u8"}},quality:f}),document.querySelector(".rplayer-pro").style.display="block"):m=!1,m||(document.querySelector(".error-message").style.display="flex")}else document.querySelector(".error-message").style.display="flex"}catch(y){document.querySelector(".error-message").style.display="flex"}}));
